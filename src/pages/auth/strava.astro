---
const STRAVA_CLIENT_ID = "165153";
const REDIRECT_URI = "http://localhost:4321/auth/strava/callback";
const SCOPES = ["read", "activity:read_all"];

const authUrl = `https://www.strava.com/oauth/authorize?client_id=${STRAVA_CLIENT_ID}&redirect_uri=${encodeURIComponent(REDIRECT_URI)}&response_type=code&approval_prompt=auto&scope=${SCOPES.join(",")}`;
---

<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Strava Authorization</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="bg-gray-100 min-h-screen flex items-center justify-center">
    <div class="bg-white p-8 rounded-lg shadow-md max-w-md w-full">
      <h1 class="text-2xl font-bold mb-4 text-center">
        Authorize Strava Access
      </h1>
      <p class="text-gray-600 mb-6 text-center">
        Click the button below to authorize your application to access your
        Strava activities.
      </p>

      <div class="space-y-4">
        <div class="bg-orange-50 p-4 rounded-md">
          <h3 class="font-semibold text-orange-800 mb-2">Required Scopes:</h3>
          <ul class="text-sm text-orange-700 space-y-1">
            <li>• <code>read</code> - Access to basic profile information</li>
            <li>
              • <code>activity:read_all</code> - Access to read all activities
            </li>
          </ul>
        </div>

        <a
          href={authUrl}
          class="w-full bg-orange-600 hover:bg-orange-700 text-white font-bold py-3 px-4 rounded text-center block transition-colors"
        >
          Authorize with Strava
        </a>

        <div class="bg-gray-50 p-4 rounded-md">
          <h3 class="font-semibold text-gray-800 mb-2">After authorization:</h3>
          <ol class="text-sm text-gray-700 space-y-1">
            <li>1. You'll be redirected to Strava</li>
            <li>2. Approve the permissions</li>
            <li>3. You'll be redirected back with a code</li>
            <li>4. Use that code to get your access token</li>
          </ol>
        </div>
      </div>
    </div>
  </body>
</html>

